
<div data-ng-init="initScenes();">

	<div>
		<div class="col-sm-8">
			<h3 data-ng-if="selectedPlace.scenes.length == 0">There are no scenes added in
				this Place</h3>
			<h3 data-ng-if="selectedPlace.scenes.length > 0">Scenes in this Place</h3>
		</div>
		<div>
			<div class="btn-group">
				<button type="button" class="btn btn-primary"
					data-ng-click="showAddNewScenePanel();" data-toggle="tooltip"
					data-placement="bottom" title="Add New Scene">
					<span class="fa fa-plus"></span>
				</button>
			</div>
		</div>
	</div>

	<div class="clearfix"></div>

	<div class="panel panel-default"
		data-ng-if="display == 'saveScenePanel'">
		<div class="panel-heading">
			<h4 class="panel-title">
				<a data-toggle="collapse" href="#scenePanel">Add/Update Scene</a>
			</h4>
		</div>

		<div id="scenePanel" class="panel-collapse collapse in">

			<div class="panel-body">
				<form class="form-horizontal" role="form" method="post">
					<div class="form-group">
						<label for="name" class="col-lg-2 control-label">Title:</label>
						<div class="col-lg-4">
							<input type="text" class="form-control"
								data-ng-model="selectedScene.title">
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="col-lg-2 control-label">Description:</label>
						<div class="col-lg-4">
							<textarea class="form-control"
								data-ng-model="selectedScene.description"></textarea>
						</div>
					</div>
					<div class="form-group">
				   		<label for="name" class="col-lg-2 control-label">Execute Based On:</label>
				   		<div class="col-lg-2">
					    	<select class="form-control" data-ng-model="selectedScene.type">
					    		<option data-ng-repeat="option in sceneTypes" value="{{option}}">{{option}}</option>
						    </select>
				   	  	</div>
				   	  	
				   	  	<label for="name" class="col-lg-2 control-label">Trigger Time:</label>
					    <div class="col-lg-2">
						    <input type="text" class="form-control"
								data-ng-model="selectedScene.settings.startTime">
					    </div>
				   	  	
				   	</div>
				   	
				   	<ul class="list-group" data-ng-repeat="area in selectedScene.areas">
					    <li class="list-group-item" data-ng-repeat="device in area.devices">
					    	{{area.areaTitle}}: {{device.title}} - {{device.status}}
					    	
					    	<div class="pull-right">								
								  <i class="fa fa-toggle-on device{{device.status}}"
							         data-ng-if="device.status == 'ON'" 
							         data-ng-click="toggleDevice(device);"
							         data-toggle="tooltip" data-placement="left" title="Toggle Device">
							      </i>
							      <i class="fa fa-toggle-on fa-rotate-180 device{{device.status}}"
							         data-ng-if="device.status == 'OFF'"
							         data-ng-click="toggleDevice(device);"
							         data-toggle="tooltip" data-placement="left" title="Toggle Device">
							      </i>
					    	</div>			    
					    </li>
				    </ul>

					<div class="form-group">
						<div class="col-lg-offset-2 col-lg-10">
							<button type="submit" data-ng-click="saveScene();"
								data-ng-if="!selectedScene.id">Create</button>
							<button type="submit" data-ng-click="saveScene();"
								data-ng-if="selectedScene.id">Update</button>
							<button type="submit" data-ng-click="fetchAndShowScenes();">cancel</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>

	<div class="clearfix"></div>
	<div style="clear: both;"></div>

	<div class="row" data-ng-if="display == 'scenes'">
		<div class="panel-group" id="accordion">
			<div class="panel panel-default" data-ng-repeat="scene in selectedPlace.scenes">
				  <div class="panel-heading">
				  
					  	 <span class="panel-title">
					        <a href="javascript:;" data-target="#devices_{{scene.id}}" data-toggle="collapse" data-parent="#accordion" > 
					        {{scene.title}}</a>
					     </span>
					     
					     <div class="pull-right">
							<a style="text-decoration: none;" href="javascript:void(0);"
								data-ng-click="showUpdateScenePanel(scene);"
								data-toggle="tooltip" data-placement="left" title="Update">
								<span class="fa fa-edit"></span>
							</a>
						</div>
				     
				  </div>
				  <div id="devices_{{scene.id}}" class="panel-collapse collapse">
					  <div class="panel-body">
					    <p>
					    	<strong>Description: </strong>{{scene.description}}<br />
					    	<strong>Execution Based On: </strong>{{scene.type}}<br />
					    	<span data-ng-if="scene.type == 'TIME'"><strong>Execute At: </strong>{{scene.settings.startTime}}</span><br />
					    	<strong>Repeat: </strong>{{scene.repeat}} 
					    	<div data-ng-if="scene.repeat">(<span data-ng-if="scene.settings.Monday"> Monday | </span> <span data-ng-if="scene.settings.Tuesday">Tuesday | </span> <span data-ng-if="scene.settings.Wednesday">Wednesday | </span> <span data-ng-if="scene.settings.Thursday">Thursday | </span> <span data-ng-if="scene.settings.Friday">Friday | </span> <span data-ng-if="scene.settings.Saturday">Saturday | </span> <span data-ng-if="scene.settings.Sunday">Sunday </span> )</div> <br />
					    </p>
						  <ul class="list-group" data-ng-repeat="area in scene.areas">
						    <li class="list-group-item" data-ng-repeat="device in area.devices">
						    	{{area.areaTitle}}: {{device.title}} - {{device.status}}
						    	
						    	<div class="pull-right">								
									  <i class="fa fa-toggle-on device{{device.status}}"
								         data-ng-if="device.status == 'ON'" 
								         data-ng-click="toggleDevice(device);"
								         data-toggle="tooltip" data-placement="left" title="Toggle Device">
								      </i>
								      <i class="fa fa-toggle-on fa-rotate-180 device{{device.status}}"
								         data-ng-if="device.status == 'OFF'"
								         data-ng-click="toggleDevice(device);"
								         data-toggle="tooltip" data-placement="left" title="Toggle Device">
								      </i>
						    	</div>			    
						    </li>
						  </ul>
					  </div>
				  </div>
			</div>
		</div>
	</div>

		<div class="clearfix"></div>
		<div style="clear: both;"></div>
		<br />

</div>

